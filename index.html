<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Star Map</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  html, body {
    margin: 0;
    padding: 0;
    background: black;
    overflow: hidden;
    touch-action: none;
  }

  canvas {
    display: block;
  }

  #info {
    position: fixed;
    bottom: 10px;
    left: 10px;
    color: #aaa;
    font-size: 12px;
    font-family: monospace;
  }
</style>
</head>
<body>

<canvas id="sky"></canvas>
<div id="info">Loading starsâ€¦</div>

<script>
const canvas = document.getElementById("sky");
const ctx = canvas.getContext("2d");
const info = document.getElementById("info");

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

// Convert magnitude to brightness
function magToRadius(mag) {
  return Math.max(0.6, 4.5 - mag);
}

fetch("stars_3000.json")
  .then(r => r.json())
  .then(stars => {
    drawStars(stars);
    info.textContent = `Loaded ${stars.length} real stars`;
  })
  .catch(err => {
    info.textContent = "Failed to load stars_3000.json";
    console.error(err);
  });

function drawStars(stars) {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.fillStyle = "black";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  for (const s of stars) {
    // Flat projection
    const x = (s.ra / 360) * canvas.width;
    const y = canvas.height - ((s.dec + 90) / 180) * canvas.height;

    const r = magToRadius(s.mag);

    ctx.beginPath();
    ctx.arc(x, y, r, 0, Math.PI * 2);
    ctx.fillStyle = "white";
    ctx.fill();

    // Show names only for bright stars
    if (s.name && s.mag <= 2.0) {
      ctx.fillStyle = "#cccccc";
      ctx.font = "10px sans-serif";
      ctx.fillText(s.name, x + 4, y - 4);
    }
  }
}
</script>

</body>
</html>
